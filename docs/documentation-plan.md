# План подготовки документации

Документ фиксирует этапы, по которым оформляем и поддерживаем контекст проекта. После утверждения каждого этапа заносим краткий отчёт в `docs/completed/`.

## Этап 1. Карта нормативных требований
- Источник: таблица из файла «Критерии для формирования требований».
- Задачи: нормализовать перечень требований, классифицировать по категориям (I–IV, вода, побочный продукт, обучение), описать источники НПА и статусы исполнения.
- Артефакты: `docs/requirements/catalog.md` с таблицей требований; `docs/requirements/rules.md` с правилами автоназначения требований на клиента в зависимости от анкеты.

## Этап 2. Клиентская анкета и профилирование
- Источник: ТЗ, раздел «При заведении нового клиента».
- Задачи: сформировать шаблон анкеты, определить обязательные поля (категория НВОС, источники водопользования, наличие скважин, побочные продукты, договоры и т.д.), описать логику расчёта статусов.
- Артефакты: `docs/client/onboarding-form.md`; `docs/client/profile-logic.md` (описание маппинга анкеты -> требования).

## Этап 3. Функциональные блоки клиентского кабинета
- Блок «Карта требований»: воронка статусов, мониторинг выполнения, уведомления.
- Блок «Артефакты/хранилище»: структура хранения, теги, политика доступа.
- Блок «Календарь»: генерация событий, дедлайны, автопродление.
- Блок «Риски»: связь требований с КоАП, диапазоны штрафов, отображение предупреждений.
- Блок «Договоры/счета/акты»: статусы, интеграция с учётной системой, хранение документов.
- Артефакты: отдельные описания в `docs/features/` (по одному файлу на блок) с пользовательскими сценариями, интерфейсными требованиями и метриками готовности.

## Этап 4. Админ-функционал и справочники
- Справочники НПА, правила построения требований, управление пользователями и ролями, ручная правка требований.
- Описать права по ролям (Админ, Менеджер, Специалист, Клиент), процессы ревизии данных, сценарии ручных корректировок.
- Артефакты: `docs/admin/roles-and-permissions.md`; `docs/admin/reference-management.md`.

## Этап 5. Безопасность и соответствие
- Учитываем 152-ФЗ, RLS-политики, аудит действий, резервное копирование.
- Описываем модель угроз, политику хранения персональных данных, требования к журналированию и резервному копированию.
- Артефакт: `docs/security/compliance.md`.

## Этап 6. Техническая архитектура и инфраструктура
- Определить целевую архитектуру (серверная часть, БД с RLS, микросервисы/модули, интеграции), хранилище файлов, CI/CD.
- Сформировать схему взаимодействия сервисов, стек технологий, требования к масштабируемости.
- Артефакты: `docs/architecture/overview.md`; `docs/architecture/data-model.md`; `docs/architecture/integration-plan.md`.

## Этап 7. План миграции и дорожная карта разработки
- Разбивка реализационных спринтов, зависимостей между блоками, критерии готовности MVP.
- Артефакт: `docs/project-roadmap.md`.

## Этап 8. Управление знаниями и completed-лог
- Настроить процесс фиксирования завершённых активностей, шаблон записи, хранение материалов.
- Артефакты: `docs/completed/README.md` (инструкция); записи формата `YYYY-MM-DD-title.md`.

## Требования к оформлению
- Все документы в Markdown, структура заголовков согласована.
- В начале каждого файла — краткая цель, в конце — чек-лист для статуса «готово».
- Внутренние ссылки на связанные документы, чтобы обеспечить навигацию.
- При обновлении документа обязательно фиксируем дату и инициатора.
