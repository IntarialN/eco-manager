# Структура файлов проекта

Текущий прототип реализован на Yii2 (basic template) с модульной разбивкой по основным блокам MVP. Ниже приведена структура репозитория и назначение основных директорий.

```
/
├── docs/                     # документация, планы, completed-лог
├── yii-app/
│   ├── assets/               # регистрация CSS/JS (AppAsset)
│   ├── config/               # конфигурация приложения (web, console, db, params)
│   ├── controllers/          # контроллеры (ClientController, SiteController)
│   ├── migrations/           # миграции БД с примерными данными
│   ├── models/               # ActiveRecord-модели (Client, Requirement, Document и др.)
│   ├── views/
│   │   ├── layouts/          # главный layout
│   │   └── client/           # вкладки личного кабинета (требования, артефакты, календарь, риски, биллинг)
│   ├── web/
│   │   ├── css/              # стили
│   │   ├── uploads/          # папка для документов
│   │   └── index.php         # входная точка web-приложения
│   ├── data/                 # SQLite база (создаётся миграциями)
│   ├── yii                   # консольный entrypoint (миграции, serve)
│   └── composer.json         # зависимости Yii2
└── README / прочие файлы
```

## Основные компоненты

- **ClientController** — агрегирует данные клиента и отдаёт их во view c вкладками «Карта требований», «Артефакты», «Календарь», «Риски», «Договоры/счета/акты».
- **Миграции** — `m230000_000000_init_schema` создаёт таблицы и заполняет демонстрационными данными (анкета, требования, документы, календарь, риски, договоры).
- **Модели** — ActiveRecord для всех сущностей MVP, связи `hasOne/hasMany` используются во view.
- **Представления** — Bootstrap 5 интерфейс с вкладками и карточками для блока.

## Правила поддержки структуры

- Новые сущности оформляем через модели + миграции, вьюхи дополняем соответствующими partials.
- Конфигурация окружений хранится в `config/`, параметры БД — в `config/db.php` (по умолчанию SQLite, можно перейти на PostgreSQL/MySQL, изменив DSN).
- Загруженные документы размещаем в `web/uploads/`; для production настроить Storage и защиту доступа.
- Любые изменения архитектуры фиксируем в ADR (см. `docs/architecture/adr/`).
- При добавлении CLI-инструментов, скриптов деплоя или новых сервисов обновляем соответствующие разделы в `docs/infra/runbook.md` и `docs/project-roadmap.md`.

## Чек-лист готовности

- [x] Добавлена структура Yii2-приложения.
- [x] Предусмотрены данные для демо-клиента (миграции).
- [x] Вьюхи покрывают все обязательные блоки MVP.
- [ ] После деплоя на сервер обновить инструкции в `docs/infra/runbook.md` с фактическим URL и параметрами.

## Связанные документы и контроль изменений

- `docs/architecture/overview.md` — высокоуровневый обзор компонентов и потоков данных.
- `docs/architecture/data-model.md` — перечень сущностей и связей (синхронизирован с миграциями).
- `docs/architecture/adr/*.md` — принятые архитектурные решения (стек, инфраструктура, переход на Yii2).
- `docs/infra/runbook.md` — инструкции по локальному окружению, деплою и CI/CD.
- `docs/documentation-plan.md` и `docs/documentation-structure.md` — актуальный план работ и последовательность обновления документации.
- `docs/documentation-todo.md` и `docs/completed/` — статусы задач и журнал изменений.

Перед изменением структуры:
1. Проверить, не противоречит ли новая организация файлов принятым ADR.
2. Обновить соседние документы (overview, data-model, runbook) и синхронизировать TODO/Completed.
3. Зафиксировать изменения в отдельной записи `docs/completed/` и, при появлении новых разделов, обновить `docs/README.md`.
