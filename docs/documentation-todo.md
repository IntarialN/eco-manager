# Открытые вопросы и TODO

Таблица отражает задачи, которые команда может закрыть самостоятельно в рамках тестового задания. Для каждого пункта сформулировано рабочее предположение и план действий. При изменении статуса фиксируйте обновление в `docs/completed/`.

| Категория | Проблема | Рабочее решение команды | Верифицировать позже | Ответственный | Статус |
|-----------|----------|-------------------------|----------------------|---------------|--------|
| Требования | Бизнес-правило `req_11` (инструкции и приказы) | Принято предположение: требование обязательно при наличии образования отходов (hazardous_waste_present или `annual_waste_kg > 0`) и назначенного ответственного. Реализовано в `docs/requirements/catalog.md` и `rules.md`, флаг `need_instruction_docs` позволяет включить вручную. | Да — подтвердить нормативное основание при возможности | Аналитик требований | В работе |
| Документы | Маппинг типов документов ↔ НПА | Команда готовит черновой список НПА (ФЗ, постановления, приказы) и связывает его с типами документов. Заполнение ведётся в `docs/admin/reference-management.md` и будет расширено при разработке. | Да — свериться с юристами при доступе | Админ + юрист (при появлении) | В работе |
| Календарь/Биллинг | События по договорам/счётам и API Bubble | Разработать внутренний контракт адаптера (DTO статусов, cron синхронизации), реализовать mock-сервис. Реальные эндпоинты заменим, когда появится спецификация. | Да — проверить, как только появится реальное API | Интеграционная команда | В работе |
| Риски | Штрафы, частота проверок, лента НПА | Собрать базовый справочник статей КоАП и типовых штрафов из открытых источников, обновлять вручную до появления автоматизации. Для ленты НПА предусмотреть ручной ввод админом. | Да — уточнить значения при доступе к официальным базам | Аналитик рисков | В работе |
| Роли | Дополнительные роли (финансы, аудит) | Подготовить черновой набор ролей (`finance_manager`, `auditor`, `external_viewer`) и прописать права в RBAC. Считаем их допустимыми, пока не сказано обратное. | Нет | Админ RBAC | Запланировано |
| Правила требований | Конфликт между overrides и авторасчётом | Реализовать таблицу `RequirementOverride` и правило приоритета «manual override > auto». Описано в `docs/admin/reference-management.md`. | Нет | Архитектор | В работе |
| Архитектура | Технологический стек | ADR `docs/architecture/adr/0001-tech-stack.md` принят: NestJS + TypeScript + Prisma + PostgreSQL, RabbitMQ, Redis, React/Vite/Tailwind. Обновлены `code-structure.md`, `overview.md`, `integration-plan.md`. | Да — пересмотреть при изменении ограничений | Техлид | Готово |
| Архитектура | Брокер сообщений и формат | Решение: RabbitMQ + JSON-сообщения, схемы в `libs/data-models/events`; отражено в `integration-plan.md`. Подготовить docker-compose сервис при старте разработки. | Да — пересмотреть при росте нагрузок | Архитектор | Готово |
| Архитектура | Диаграммы (компонентная, ERD, последовательности) | Сгенерировать диаграммы в PlantUML/Draw.io на базе текущих документов и приложить в `docs/architecture/diagrams/`. | Нет | Архитектор/BA | Запланировано |
| Хранилище/Инфра | Объектное хранилище и сертификация | Решение зафиксировано в ADR 0002: MinIO (dev/stage) + YOS (prod), шифрование через KMS, бэкапы Velero/pgBackRest. | Да — подтвердить при доступе к реальным условиям | Инфраструктура | Готово |
| Безопасность | Уровень защищённости ПДн, бэкапы, уведомления | Предположить УЗ-2, настроить ежедневные бэкапы БД и storage, ежемесячное тестовое восстановление. Подготовить шаблон уведомления по 152-ФЗ (в приложении к `security/compliance.md`). | Да — подтвердить с DPO при появлении | Ответственный за безопасность | В работе |
| Интеграции | Каналы уведомлений и SLA | Задать дефолт: email (SLA 15 мин), чат-бот (SLA 30 мин), SMS — аварийный канал. Описать fallback в `integration-plan.md`. | Да — скорректировать при реальной эксплуатации | Продакт (по факту) | Запланировано |
| Справочники | Перечень НПА и ссылки | Сформировать черновой список нормативных актов в `reference-management.md`, указать статус «подтверждён/на проверке». | Да — при возможности сверить с заказчиком | Юрист/аналитик | В работе |
| Notifications | Мониторинг и отладка интеграций | Решение описано в ADR 0002: Prometheus + Grafana + Loki + Alertmanager, алертинг через email/чат-бот, описан процесс бэкапов и мониторинга. | Нет | DevOps | Готово |

## Чек-лист обновления
- [ ] Каждая запись содержит решение, которое команда может реализовать самостоятельно.
- [ ] Все изменения отражаются в соответствующих документах и журналах completed.
- [ ] После фактического выполнения задача переносится в `docs/completed/` с ссылкой на обновлённые файлы.
