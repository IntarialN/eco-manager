# Открытые вопросы и TODO

Таблица отражает задачи, которые команда может закрыть самостоятельно в рамках тестового задания. Для каждого пункта сформулировано рабочее предположение и план действий. При изменении статуса фиксируйте обновление в `docs/completed/`.

| Категория | Проблема | Рабочее решение команды | Верифицировать позже | Ответственный | Статус |
|-----------|----------|-------------------------|----------------------|---------------|--------|
| Требования | Бизнес-правило `req_11` (инструкции и приказы) | Принято предположение: требование обязательно при наличии образования отходов (hazardous_waste_present или `annual_waste_kg > 0`) и назначенного ответственного. Реализовано в `docs/requirements/catalog.md` и `rules.md`, флаг `need_instruction_docs` позволяет включить вручную. | Да — подтвердить нормативное основание при возможности | Аналитик требований | В работе |
| Документы | Маппинг типов документов ↔ НПА | Черновой список НПА и таблица соответствия типов документов отражены в `docs/admin/reference-management.md`; требуется юридическая верификация. | Да — свериться с юристами при доступе | Админ + юрист (при появлении) | Готово (ожидает верификации) |
| Календарь/Биллинг | События по договорам/счётам и API Bubble | Контракт и mock описаны в `docs/architecture/mock-bubble-api.md`; синхронизация и SLA отражены в `integration-plan.md`. Разработка mock-сервиса запланирована. | Да — проверить, как только появится реальное API | Интеграционная команда | Готово |
| Риски | Штрафы, частота проверок, лента НПА | Собрать базовый справочник статей КоАП и типовых штрафов из открытых источников, обновлять вручную до появления автоматизации. Для ленты НПА предусмотреть ручной ввод админом. | Да — уточнить значения при доступе к официальным базам | Аналитик рисков | В работе |
| Роли | Дополнительные роли (финансы, аудит) | Роли `finance_manager`, `auditor`, `external_viewer` добавлены в `docs/admin/roles-and-permissions.md` с матрицей доступа и политикой прав. | Нет | Админ RBAC | Готово |
| Правила требований | Конфликт между overrides и авторасчётом | Алгоритм конфликт-менеджмента описан в `docs/admin/reference-management.md` (preview пересчёт, приоритет overrides, контроль `expires_at`). | Нет | Архитектор | Готово |
| Архитектура | Технологический стек | ADR `docs/architecture/adr/0001-tech-stack.md` принят: NestJS + TypeScript + Prisma + PostgreSQL, RabbitMQ, Redis, React/Vite/Tailwind. Обновлены `code-structure.md`, `overview.md`, `integration-plan.md`. | Да — пересмотреть при изменении ограничений | Техлид | Готово |
| Архитектура | Брокер сообщений и формат | Решение: RabbitMQ + JSON-сообщения, схемы в `libs/data-models/events`; отражено в `integration-plan.md`. Подготовить docker-compose сервис при старте разработки. | Да — пересмотреть при росте нагрузок | Архитектор | Готово |
| Архитектура | Диаграммы (компонентная, ERD, последовательности) | Подготовлены PlantUML диаграммы (`component.puml`, `erd.puml`, `sequence_document_upload.puml`) в `docs/architecture/diagrams/`. | Нет | Архитектор/BA | Готово |
| Хранилище/Инфра | Объектное хранилище и сертификация | Решение зафиксировано в ADR 0002: MinIO (dev/stage) + YOS (prod), шифрование через KMS, бэкапы Velero/pgBackRest. | Да — подтвердить при доступе к реальным условиям | Инфраструктура | Готово |
| Безопасность | Уровень защищённости ПДн, бэкапы, уведомления | В `docs/security/compliance.md` зафиксирован УЗ-2, описаны инструменты (pgBackRest, Velero) и добавлен шаблон уведомления ПДн. Требуется подтверждение DPO по уровню и сертификации. | Да — подтвердить с DPO при появлении | Ответственный за безопасность | Готово (ожидает подтверждения) |
| Интеграции | Каналы уведомлений и SLA | Задать дефолт: email (SLA 15 мин), чат-бот (SLA 30 мин), SMS — аварийный канал. Описать fallback в `integration-plan.md`. | Да — скорректировать при реальной эксплуатации | Продакт (по факту) | Запланировано |
| Справочники | Перечень НПА и ссылки | Сформирован черновой список НПА в `reference-management.md` с ссылками и категориями; требуется подтверждение заказчика. | Да — при возможности сверить с заказчиком | Юрист/аналитик | Готово (ожидает верификации) |
| Notifications | Мониторинг и отладка интеграций | Решение описано в ADR 0002: Prometheus + Grafana + Loki + Alertmanager, алертинг через email/чат-бот, описан процесс бэкапов и мониторинга. | Нет | DevOps | Готово |
| Инфра | Runbook разработки и деплоя | Черновик runbook в `docs/infra/runbook.md`: локальный запуск, Git-процесс, CI/CD, TODO по .env и миграциям. | Нет | Инфраструктура | Готово (подлежит расширению) |

## Чек-лист обновления
- [ ] Каждая запись содержит решение, которое команда может реализовать самостоятельно.
- [ ] Все изменения отражаются в соответствующих документах и журналах completed.
- [ ] После фактического выполнения задача переносится в `docs/completed/` с ссылкой на обновлённые файлы.
